.data 

.include "..\background.data"
.include "..\frente1.data"

.text
SETUP:		la a0, background
		li a1, 0
		li a2, 0
		li a3, 0
		call PRINT
		# a0 = endereço da imagem
		# a1 = x (coluna)
		# a2 = y (linha)
		# a3 = frame (0 ou 1)
		# t0 = endereço do bitmap display
		# t1 = endereço da img
		# t2 = contador da linha
		# t3 = contador da coluna
		# t4 = largura
		# t5 = altura
		
GAME_LOOP:	la a0, frente1 # geração do personagem
		li a1, 16
		li a2, 0
		li a3, 0
		call PRINT
		
PRINT:		li t0, 0xFF0
		add t0, t0, a3
		slli t0, t0, 20
		add t0, t0, a1
		
		li t1, 320
		mul t1, t1, a2
		add t0, t0, t1
		addi t1, a0, 8
		# definição do endereço da imagem
		
		#zerando os contadores
		mv t2, zero 
		mv t3, zero
		
		# definição da largura e da altura
		lw t4, 0(a0)
		lw t5, 4(a0)
		
PRINT_LINHA:	lw t6, 0(t1)
		sw t6, 0(t0) # carrega o pixel na imagem
		
		addi t1, t1, 4 # vai pro proximo pixel
		addi t0, t0, 4
		
		addi t3, t3, 4 # incrementa o contador de coluna
		
		blt t3, t4, PRINT_LINHA # verifica se terminou de desenhar a linha
		
		addi t0, t0,  320 # pula p proxima linha
		sub t0, t0, t4 
		
		mv t3, zero # zero o contador de coluna
		addi t2, t2, 1 # 3 incrementa o contador de linha
		bgt t5, t2, PRINT_LINHA
		ret
